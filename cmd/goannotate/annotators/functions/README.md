# Package [cloudeng.io/go/cmd/goannotate/annotators/functions](https://pkg.go.dev/cloudeng.io/go/cmd/goannotate/annotators/functions?tab=doc)
[![CircleCI](https://circleci.com/gh/cloudengio/go.gotools.svg?style=svg)](https://circleci.com/gh/cloudengio/go.gotools) [![Go Report Card](https://goreportcard.com/badge/cloudeng.io/go/cmd/goannotate/annotators/functions)](https://goreportcard.com/report/cloudeng.io/go/cmd/goannotate/annotators/functions)

```go
import cloudeng.io/go/cmd/goannotate/annotators/functions
```


## Constants

### LogCallWithContextDescription
```go
LogCallWithContextDescription = `
LogCallWithContext provides a functon call generator for generating calls to
functions with the following signature:

  func (ctx <contextType>, functionName, format string, arguments ...interface{}) func(ctx <contextType>, format string, namedResults ...interface{}) 

These are invoked via defer as show below:

  defer <call>(ctx, "<function-name>",  "<format>", <parameters>....)(ctx, "<format>", <results>)

The actual type of the context is determined by the ContextType configuration
field. The parameters and named results are captured and passed to the logging
call according to cloudeng.io/go/derive.ArgsForParams and ArgsForResults.
The logging function must return a function that is defered to capture named
results and log them on function exit.
`

```
LogCallWithContextDescription documents LogCallWithContext.

### SimpleLogCallDescription
```go
SimpleLogCallDescription = `
SimpleLogCall provides a functon call generator for generating calls to
functions with the same signature log.Callf and fmt.Printf.
`

```
SimpleLogCallDescription documents SimpleLogCall.



## Functions
### Func CallGenerators
```go
func CallGenerators() []string
```
CallGenerators lists all of the available CallGenerators.

### Func RegisterCallGenerator
```go
func RegisterCallGenerator(callGenerator CallGenerator)
```
RegisterCallGenerator registers a new function call generator.



## Types
### Type CallGenerator
```go
type CallGenerator interface {
	// UnmarshalYAML unmarshals the annotator's yaml configuration.
	UnmarshalYAML(buf []byte) error
	// Import returns the import path for the function to be generated by
	// Generate.
	Import() string
	// Generate creates the appropriate call code and import path for
	// the function to be used as an annotation.
	Generate(*token.FileSet, *types.Func, *ast.FuncDecl) (string, error)
	// Describe returns a description for the function annotation.
	Describe() string
}
```
CallGenerator represents the ability to generate code for a function call
using arguments taken from a function call signature.

### Functions

```go
func Lookup(typeName string) CallGenerator
```
Lookup returns the CallGenerator, if any, with the specified type.




### Type EssentialOptions
```go
type EssentialOptions struct {
	Type         string `yaml:"type" annotator:"name of annotator type."`
	ImportPath   string `yaml:"importPath" annotator:"import path for the logging function."`
	FunctionName string `yaml:"functionName" annotator:"name of the function to be invoked."`
}
```
EssentialOptions represents the configuration options required for all
function generators.


### Type LogCallWithContext
```go
type LogCallWithContext struct {
	EssentialOptions `yaml:",inline"`
	ContextType      string `yaml:"contextType" annotator:"type for the context parameter and result."`
}
```
LogCallWithContext represents a function call generator for a logging call
with the following signature:

    func (ctx <contextType>, functionName, callerLocation, format string, arguments ...interface{}) func(ctx <contextType>, format string, namedResults ...interface{})

See LogCallWithContextDescription for a complete description.

### Methods

```go
func (lc *LogCallWithContext) Describe() string
```
Describe implements functions.CallGenerator.


```go
func (lc *LogCallWithContext) Generate(fset *token.FileSet, fn *types.Func, decl *ast.FuncDecl) (string, error)
```


```go
func (lc *LogCallWithContext) Import() string
```
Import implements functions.CallGenerator.


```go
func (lc *LogCallWithContext) UnmarshalYAML(buf []byte) error
```
UnmarshalYAML implements functions.CallGenerator.




### Type SimpleLogCall
```go
type SimpleLogCall struct {
	EssentialOptions `yaml:",inline"`
	ContextType      string `yaml:"contextType" annotator:"type for the context parameter and result."`
}
```
SimpleLogCall represents a function call generator for a logging call with
the same signature as log.Callf and fmt.Printf.

### Methods

```go
func (sl *SimpleLogCall) Describe() string
```
Describe implements functions.CallGenerator.


```go
func (sl *SimpleLogCall) Generate(fset *token.FileSet, fn *types.Func, decl *ast.FuncDecl) (string, error)
```


```go
func (sl *SimpleLogCall) Import() string
```
Import implements functions.CallGenerator.


```go
func (sl *SimpleLogCall) UnmarshalYAML(buf []byte) error
```
UnmarshalYAML implements functions.CallGenerator.




### Type Spec
```go
type Spec struct {
	yaml.MapSlice
	Type string `yaml:"type"`
}
```
Spec represents the yaml configuration for a function call generator.

### Methods

```go
func (s *Spec) UnmarshalYAML(unmarshal func(interface{}) error) error
```
UnmarshalYAML implements yaml.Unmarshaler.






